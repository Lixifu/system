# 组织方活动/培训详情页面志愿者信息模块开发

## 1. 需求分析

* 在活动和培训详情页面新增"报名志愿者信息"展示模块

* 显示完整的志愿者报名信息（姓名、联系方式、报名时间、服务岗位等）

* 支持分页浏览

* 提供筛选和导出功能

## 2. 技术方案

### 2.1 后端API优化

1. **活动详情API优化**：

   * 修改 `activities/:id` 路由，增加参与者详情信息返回

   * 确保组织者能查看完整的志愿者联系方式

2. **培训详情API优化**：

   * 修改 `trainings/:id` 路由，增加参与者详情信息返回

   * 确保组织者能查看完整的志愿者联系方式

3. **现有API利用**：

   * 利用现有 `activities/:id/participants` 和 `trainings/:id/participants` API实现分页和筛选

   * 利用现有 `activities/:id/export` 和 `trainings/:id/export` API实现导出功能

### 2.2 前端模块开发

1. **志愿者信息展示模块**：

   * 在活动和培训详情页面新增独立的志愿者信息展示区域

   * 实现表格展示，包含志愿者姓名、联系方式、报名时间、状态等字段

   * 添加分页控件，支持页码切换和每页条数调整

2. **筛选功能**：

   * 添加状态筛选（待审核、已通过、已拒绝等）

   * 添加姓名和手机号搜索

   * 添加报名时间范围筛选

3. **导出功能**：

   * 添加导出按钮，支持导出为Excel格式

   * 导出内容包含所有志愿者报名信息

## 3. 实现步骤

### 3.1 后端实现（修改现有代码）

1. 修改 `backend/routes/activities.js` 中的活动详情路由，确保返回完整的参与者信息
2. 修改 `backend/routes/trainings.js` 中的培训详情路由，确保返回完整的参与者信息
3. 调整参与者信息返回格式，确保包含所有必要字段

### 3.2 前端实现（新增/修改代码）

1. 在活动详情页面（HTML/JS）中新增志愿者信息模块
2. 在培训详情页面（HTML/JS）中新增志愿者信息模块
3. 实现参与者列表数据获取和渲染
4. 实现分页功能
5. 实现筛选功能
6. 实现导出功能

## 4. 数据结构设计

### 4.1 参与者信息返回格式

```json
{
  "volunteerId": 1,
  "volunteerName": "张三",
  "contactInfo": {
    "phone": "13800138000",
    "email": "zhangsan@example.com"
  },
  "registrationTime": "2025-12-21T10:00:00Z",
  "status": "approved",
  "gender": "male",
  "age": 25,
  "signInTime": "2025-12-22T09:00:00Z",
  "signOutTime": "2025-12-22T17:00:00Z",
  "duration": 8
}
```

## 5. 权限控制

* 确保只有活动/培训的组织者和管理员才能查看完整的志愿者信息

* 普通用户无法查看志愿者的联系方式

## 6. 性能优化

* 使用分页加载，避免一次性加载大量数据

* 添加索引，提高查询性能

* 实现缓存机制，减少数据库查询次数

## 7. 测试计划

1. 测试活动详情页志愿者信息模块的显示和功能
2. 测试培训详情页志愿者信息模块的显示和功能
3. 测试分页、筛选和导出功能
4. 测试权限控制
5. 测试性能表现

## 8. 预期效果

* 组织方用户可以在活动/培训详情页面直观查看所有报名志愿者的完整信息

* 支持灵活的筛选和分页，方便管理大量志愿者数据

* 提供导出功能，便于数据离线分析和管理

* 界面清晰有序，用户体验良好

